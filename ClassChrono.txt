package fr.javaCorp.modele;

import javax.swing.Timer;

public class Chronometre {
	
	private long tempsDepart=0;
    private long tempsFin=0;
    private long pauseDepart=0;
    private long pauseFin=0;
    private long duree=0;

    // Début de chrono
    public void start(){
    	tempsDepart=System.currentTimeMillis();
        tempsFin=0;
        pauseDepart=0;
        pauseFin=0;
        duree=0;
    }
    // on mets en pause le chrono
    public void pause(){
        if(tempsDepart==0) {return;}
        pauseDepart=System.currentTimeMillis();
}
    // on redémarre le chrono
    public void resume(){
        if(tempsDepart==0) {return;}
        if(pauseDepart==0) {return;}
        pauseFin=System.currentTimeMillis();
        tempsDepart=tempsDepart+pauseFin-pauseDepart;
        tempsFin=0;
        pauseDepart=0;
        pauseFin=0;
        duree=0;
}
    // on arrete le chrono    
    public void stop(){
        if(tempsDepart==0) {return;}
        tempsFin=System.currentTimeMillis();
        duree=(tempsFin-tempsDepart) - (pauseFin-pauseDepart);
        tempsDepart=0;
        tempsFin=0;
        pauseDepart=0;
        pauseFin=0;
    }        
    
    // Getter
    public long getDureeSec(){
        return duree/1000;
    }
        
    public long getDureeMs(){
        return duree;
    }        

    public String getDureeTxt(){
        return timeToHMS(getDureeSec());
    }

    // Affichage du chrono
    public static String timeToHMS(long tempsS){

        // IN : (long) temps en secondes
        // OUT : (String) temps au format texte : "1 h 26 min 3 s"

        int heure = (int) (tempsS / 3600);
        int minute = (int) ((tempsS % 3600) / 60);
        int seconde = (int) (tempsS % 60);

        String r = 	((heure<10)?"0"+heure:heure)+ ":" +
        			((minute<10)?"0"+minute:minute) + ":"+
        			((seconde<10)?"0"+seconde:seconde);
        			
        return r;
    }

}
